{% extends "alfa.html"%}
{% load static%}

{% block body%}
<main>
   <div class="service_head_img">
   
    <div class="container">
        <div class="service_img_text">
        <h2>Services</h2>
        <ul class="breadcrumb">
          <li><a href="{% url 'Home' %}">Home </a></li>
          <li><a href="#">Services</a></li>
        </ul>
        

    </div>
    </div>
    
</div>
<div class="container">
  <div class="service_container">
   
    <div id="data-container">
        <div class="sort_services">
            <div class="sort_services_part1">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M2 4C2 2.89543 2.89543 2 4 2H8C9.10457 2 10 2.89543 10 4V8C10 9.10457 9.10457 10 8 10H4C2.89543 10 2 9.10457 2 8V4Z" stroke="#0E140F" stroke-width="1.5" stroke-linejoin="round"/>
                    <path d="M14 4C14 2.89543 14.8954 2 16 2H20C21.1046 2 22 2.89543 22 4V8C22 9.10457 21.1046 10 20 10H16C14.8954 10 14 9.10457 14 8V4Z" stroke="#0E140F" stroke-width="1.5" stroke-linejoin="round"/>
                    <path d="M2 16C2 14.8954 2.89543 14 4 14H8C9.10457 14 10 14.8954 10 16V20C10 21.1046 9.10457 22 8 22H4C2.89543 22 2 21.1046 2 20V16Z" stroke="#0E140F" stroke-width="1.5" stroke-linejoin="round"/>
                    <path d="M14 16C14 14.8954 14.8954 14 16 14H20C21.1046 14 22 14.8954 22 16V20C22 21.1046 21.1046 22 20 22H16C14.8954 22 14 21.1046 14 20V16Z" stroke="#0E140F" stroke-width="1.5" stroke-linejoin="round"/>
                    </svg>
                 <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M10 6H16M10 14H16M10 10H22M10 18H22M4 10C2.89543 10 2 9.10457 2 8C2 6.89543 2.89543 6 4 6C5.10457 6 6 6.89543 6 8C6 9.10457 5.10457 10 4 10ZM4 18C2.89543 18 2 17.1046 2 16C2 14.8954 2.89543 14 4 14C5.10457 14 6 14.8954 6 16C6 17.1046 5.10457 18 4 18Z" stroke="#0E140F" stroke-width="1.5" stroke-linecap="round"/>
                 </svg>
                 <span>35 Services Found</span>

            </div>
            <div class="sort_services_part1">
                <span>Shot by Default</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M7 10L12 14L17 10" stroke="#0E140F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                
            </div>
        </div> 
        
        <div id="service_card-container" class="service_card-container"> 

        </div>
            
           
    </div> 

    <div class="pagination" id="pagination"> 
        <a href="#" id="prev">Previous</a> 
        <a href="#" class="page-link" data-page="1">1</a> 
        <a href="#" class="page-link" data-page="2">2</a> 
        <a href="#" class="page-link" data-page="3">3</a> 
        
        <a href="#" id="next">Next</a> 
        <p id="page-numbers"> </p> 
    </div>
   
    
</div>   
</div>

</main>
<script>

    var services={{services | safe}}
    console.log(services)
    var container=document.getElementById("service_card-container")
    var mediaBaseUrl="/media/"
    
    
 
    
    
    services.forEach(service=>{
        var card=document.createElement("div")
        card.classList.add("card")
    
        var card_img_div=document.createElement('div')
        card_img_div.classList.add("service_card_img")
    
        var service_img=document.createElement('img')
        service_img.src=`${mediaBaseUrl}${service.service_image}`;
        card_img_div.append(service_img)
    
        var h1=document.createElement('h1')
        h1.textContent=service.service
        var p=document.createElement('p')
        p.textContent=service.about
    
        var docs=document.createElement('div')
        docs.classList.add("services_specialist_doctors")
    
        var docs_imgs=document.createElement('div')
        docs_imgs.classList.add("services_specialist_doctors_img")
    
        var a_btn=document.createElement('a')
        a_btn.href=`/service_detail/${service.id}/${service.service}`
    
    
        var btn=document.createElement('button')
        btn.textContent="View Details"
    
        var number=0;
        a_btn.append(btn)
        docs.append(docs_imgs)
        card.append(card_img_div,h1,p,docs,a_btn)
        container.append(card)
    
        var datam = fetch(`allservices/${service.service}/`, { method: "GET" })
        .then(response => {
            if (!response.ok) {
                return response.text().then(text => {throw new Error(`Network response was not ok. Response: ${text}`);});
            }
            return response.json();
        })
        .then(data =>data.forEach(doc=>{console.log(doc.doctor_image)
            var doctor_img_frame=document.createElement('div')
            doctor_img_frame.classList.add("doctor_image_frame")
            docs_imgs.append(doctor_img_frame)
            var doctor_img=document.createElement('img')
            doctor_img.classList.add("doctor_image")
              doctor_img.src=`${mediaBaseUrl}${doc.doctor_image}`;
              doctor_img_frame.append(doctor_img)
              
             if (number<1){
                var doctor_num=document.createElement('p')
            doctor_num.textContent=`${data.length} Specialist doctors`
            docs.append(doctor_num) 
            number++; 
             }
           
            
        }) 
        )
        .catch(error => console.error('There has been a problem with your fetch operation:', error));
        
      
        
     
    
    
    
       
    
    })
    
    
    
    
    </script>

{% endblock body%}